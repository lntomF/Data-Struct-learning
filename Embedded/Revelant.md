
# 嵌入式名词相关学习

## 中断进阶学习

### 学习路径

1.了解什么是是中断（中断是在除CPU上的其他外设所发生的使CPU异常的）
CPU外部（比如各种片上总线，AHB\APB等）促使CPU内部产生异常的，叫做中断。
2.了解什么是异常（异常一般发生在CPU内部）
对于Cortex-M4来说，CPU内部打断当前程序执行流的（比如算数异常，除0），叫异常。
同步异常和异步异常
同步异常是CPU直接接受异常直接反映到OS上。
异步异常是外设接受异常后通过一段时间反映到CPU上然后在反映到OS上。
3.了解什么是内核、总线及外设
内核->CPU
总线->外设和CPU之间的桥梁（数据总线、指令总线、系统总线......）
外设->片上外设（I2C、SPI、UART......）
4.什么是NVIC内核外设
NVIC内核外设->CPU内部的专用外设用于控制中断系统的总指挥
5.什么是中断向量表2次幂对齐
中断向量表的2次幂对齐->中断向量表对偏移量大小的要求。必须是向上圆整否则会出错
偏移量的计算方法：（内部异常+外部中断个数）*4就是异常和中断所占的字节数，在字节数的上方寻找离字节数最近的2的幂数。
**6.什么是软中断**
软中断->是软件触发的中断机制。软中断在项目开发中可以用来异步事件处理、任务间通信、系统调用、错误处理和测试。例子：软件定时器。**软件定时器：在一个硬件定时器定时一个1ms然后用软件进行相关的操作->在20个1ms中操作,在30个1ms中操作......**
7.了解什么是是中断悬起\中断的延迟
**单一一次中断的中断处理过程**：中断产生后通过总线发送中断请求到NVIC中，**中断悬起**后**中断请求结束**然后CPU会从**线程模式转移到Handler模式**然后中断悬起会被解悬然后在进行中断处理函数。
中断的延迟->从中断触发（请求开始）到CPU开始执行中断服务程序（ISR）的时间，称为中断延迟。

>**??线程模式 vs. Handler模式??：**
??线程模式??：运行普通代码（如main函数）。
??Handler模式??：运行中断服务程序（ISR），具有更高权限（可访问特殊寄存器）。

9.了解产生持续中断的中断处理过程
在连续中断场景下，若新中断的优先级高于当前ISR，CPU会立即抢占当前Handler模式，执行新中断（嵌套中断）；若优先级相同或更低，则需等待当前ISR完成。电平触发中断可能因信号未清除而重复触发，无需等待前一个ISR完全退出。
**_面试常问_**
10.产生多次中断脉冲的中断处理过程（位于中断悬起过程中）
在连续中断的场景下，若外部有持续的中断请求，则该中断在悬起过程中只会执行最初接触的请求，之后的中断请求就会被丢弃。
![alt text](/Embedded/photo/产生多次中断脉冲的中断处理过程（位于中断悬起过程中）.png)
11.产生多次中断脉冲的中断处理过程（位于中断悬起过程之外）
![alt text](/Embedded/photo/产生多次中断脉冲的中断处理过程（位于中断悬起过程之外）.png)
12.寄存器映射
处在内核的地址（对应一些外设的地址）在通过一些总线转移到外设寄存器上的地址（Code一般保存在片内flash中）
